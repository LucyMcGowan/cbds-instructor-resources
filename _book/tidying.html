<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Course 6: Data Tidying | Instructor Resources for Chromebook Data Science</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Course 6: Data Tidying | Instructor Resources for Chromebook Data Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Course 6: Data Tidying | Instructor Resources for Chromebook Data Science" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Aboozar Hadavand">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="intro-r.html">
<link rel="next" href="visualization.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>What is this book</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i>Course 0: Introduction to Chromebook Data Science</a></li>
<li class="chapter" data-level="" data-path="chromebook.html"><a href="chromebook.html"><i class="fa fa-check"></i>Course 1: How to Use a Chromebook</a></li>
<li class="chapter" data-level="" data-path="google.html"><a href="google.html"><i class="fa fa-check"></i>Course 2: Google and the Cloud</a></li>
<li class="chapter" data-level="" data-path="organizing.html"><a href="organizing.html"><i class="fa fa-check"></i>Course 3: Organizing Data Science Projects</a></li>
<li class="chapter" data-level="" data-path="version-control.html"><a href="version-control.html"><i class="fa fa-check"></i>Course 4: Version Control</a></li>
<li class="chapter" data-level="" data-path="intro-r.html"><a href="intro-r.html"><i class="fa fa-check"></i>Course 5: Introduction to R</a><ul>
<li class="chapter" data-level="" data-path="intro-r.html"><a href="intro-r.html#exercise-1-installing-and-uninstalling-packages"><i class="fa fa-check"></i>Exercise 1: Installing and Uninstalling Packages</a></li>
<li class="chapter" data-level="" data-path="intro-r.html"><a href="intro-r.html#exercise-2-using-the-script-editor"><i class="fa fa-check"></i>Exercise 2: Using the script editor</a></li>
<li class="chapter" data-level="" data-path="intro-r.html"><a href="intro-r.html#exercise-4-reverse-a-string-function"><i class="fa fa-check"></i>Exercise 4: Reverse a String Function</a></li>
<li class="chapter" data-level="" data-path="intro-r.html"><a href="intro-r.html#exercise-5-other-short-exercises"><i class="fa fa-check"></i>Exercise 5: Other Short Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="tidying.html"><a href="tidying.html"><i class="fa fa-check"></i>Course 6: Data Tidying</a><ul>
<li class="chapter" data-level="" data-path="tidying.html"><a href="tidying.html#exercise-1-tidying-nba-finals-data"><i class="fa fa-check"></i>Exercise 1: Tidying NBA Finals Data</a></li>
<li class="chapter" data-level="" data-path="tidying.html"><a href="tidying.html#exercise-2-calculating-age-based-on-birthdate"><i class="fa fa-check"></i>Exercise 2: Calculating Age Based on Birthdate</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i>Course 7: Data Visualization</a><ul>
<li class="chapter" data-level="" data-path="visualization.html"><a href="visualization.html#exercise-1-visualizing-nba-finals-data"><i class="fa fa-check"></i>Exercise 1: Visualizing NBA Finals Data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="getting-data.html"><a href="getting-data.html"><i class="fa fa-check"></i>Course 8: Getting Data</a></li>
<li class="chapter" data-level="" data-path="analysis.html"><a href="analysis.html"><i class="fa fa-check"></i>Course 9: Data Analysis</a></li>
<li class="chapter" data-level="" data-path="communication.html"><a href="communication.html"><i class="fa fa-check"></i>Course 10: Written and Oral Communication in Data Science</a></li>
<li class="chapter" data-level="" data-path="getting-jobs.html"><a href="getting-jobs.html"><i class="fa fa-check"></i>Course 11: Getting a Job in Data Science</a></li>
<li class="chapter" data-level="" data-path="random.html"><a href="random.html"><i class="fa fa-check"></i>Course 11: Random Stuff</a><ul>
<li class="chapter" data-level="" data-path="random.html"><a href="random.html#classroom-activity-1"><i class="fa fa-check"></i>Classroom activity 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Instructor Resources for Chromebook Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidying" class="section level1 unnumbered">
<h1>Course 6: Data Tidying</h1>
<p>Creating an object such as a data frame and saving it as a rda or rds file
save(mpg, cyl, file=“mtcars_objects.rda”)
load(“mtcars_objects.rda”)
saveRDS(mpg, file=“mpg.rds”)
mpg &lt;- readRDS(“mpg.rds”)
Write a function that takes two numbers as input and checks whether the first one is bigger than the second one.</p>
<p>Let’s create a data frame in R
And then save the data as rda and rds and then load the data and share the data on slack
Let’s go to your imdb project on RStudio.Cloud. Create an Rmd file in your code folder.
Edit the YAML in the file.
Load the imdb dataframe. The rest of the session we’ll work with different columns in the data.
Push all the changes to Github</p>
<p>Write an encoder function that takes a word from the user and encodes each character in the alphabet to the next character and returns it. e.g. “peach” will be encoded to “qfbdi”</p>
<div id="exercise-1-tidying-nba-finals-data" class="section level2 unnumbered">
<h2>Exercise 1: Tidying NBA Finals Data</h2>
<p>In this exercise we will work with <a href="https://www.kaggle.com/daverosenman/nba-finals-team-stats">NBA final teams stats</a> on Kaggle. There is two .csv files. The ‘champs.csv’ file contains game-by-game team totals for the championship team from every finals game between 1980 and 2017. The ‘runnerups.csv’ contains game-by-game team totals for the runner-up team from every finals game between 1980 and 2017. The 1980 NBA Finals was the first Finals series since the NBA added the three point line.</p>
<p>This exercise is inpired by two kernells on Kaggle that can be found <a href="https://www.kaggle.com/carterallen/nba-championship-data">here</a> and <a href="https://www.kaggle.com/daverosenman/nba-finals-three-point-stats-1980-2017">here</a>. Ask your stduent to download the data on Kaggle or on our Github repository for this guide.</p>
<div class="note">
<p>In order to download data on Kaggle, students are required to create a Kaggle account. They can do so by linking their Google account.</p>
</div>
<p>The first step is to import the data into R. Since importing .csv files is in a future lesson, tell your students the commands the need to import the .csv files. We are going to use <code>read_csv</code> command from the <strong>readr</strong> package. Ask them to save the two files in two separate objects. Here we called them <code>champs</code> and <code>runners</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">echo =</span> <span class="ot">TRUE</span>)
<span class="kw">library</span>(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ────────────────── tidyverse 1.2.1 ──</code></pre>
<pre><code>## ✔ ggplot2 2.2.1     ✔ readr   1.1.1
## ✔ tibble  1.4.2     ✔ purrr   0.2.4
## ✔ tidyr   0.8.0     ✔ dplyr   0.7.4
## ✔ ggplot2 2.2.1     ✔ forcats 0.3.0</code></pre>
<pre><code>## ── Conflicts ───────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># importing the data</span>
champs &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="st">&quot;./data/nba/championsdata.csv&quot;</span>)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   .default = col_integer(),
##   Team = col_character(),
##   FGP = col_double(),
##   TPP = col_double(),
##   FTP = col_double()
## )</code></pre>
<pre><code>## See spec(...) for full column specifications.</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">runners &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="st">&quot;./data/nba/runnerupsdata.csv&quot;</span>)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   .default = col_integer(),
##   Team = col_character(),
##   FGP = col_double(),
##   TPP = col_double(),
##   FTP = col_double()
## )
## See spec(...) for full column specifications.</code></pre>
<p>You can ask your students to find out what column contains team names. They can go to the Kaggle <a href="https://www.kaggle.com/daverosenman/nba-finals-team-stats">link</a> to find out. The column is called <code>Team</code>.</p>
<p>Now ask them to find the <em>distinct</em> team names. The function used to find the distinct values of a variable is <code>distinct()</code>. You can either tell them the function or ask them to google and find the function themselves. Here’s how they can do it in a pipe.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## check the names, see any issue</span>
champs <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">select</span>(Team) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">distinct</span>()</code></pre>
<pre><code>## # A tibble: 13 x 1
##    Team     
##    &lt;chr&gt;    
##  1 Lakers   
##  2 Celtics  
##  3 Sixers   
##  4 Pistons  
##  5 Bulls    
##  6 Rockets  
##  7 Spurs    
##  8 Heat     
##  9 Mavericks
## 10 &#39;Heat&#39;   
## 11 Warriors 
## 12 Cavaliers
## 13 Warriorrs</code></pre>
<p>Once your students run the code above, they will notice some peculiar values. For instance <code>'Heat'</code> and <code>Warriorrs</code>. These kind of mistakes can happen in any data analysis. Ask your students to fix the issue using a <strong>dplyr</strong> function. Here’s how we did it using hte <code>iflese()</code> function. The line <code>mutate(Team = ifelse(Team == "Warriorrs","Warriors",Team))</code> creates a column called <code>Team</code> which is the same as the old column <code>Team</code> except whenever the value in the column is <code>Warriorrs</code> it is replaced by <code>Warriors</code>. Note that there are other ways to do this so you can ask your students to figure out a way on their own.</p>
<p>The other fix we need to do is to convert the two columns <code>Win</code> and <code>Home</code>. Ask your students to look at the class of the two columns. They will see that the values stored in the two columns are integer. Ask them to convert those two columns to factors and save the new columns back to the columns <code>Win</code> and <code>Home</code>. Here’s how to do so for both datasets.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># fix the heat and warriors</span>
champs &lt;-<span class="st"> </span>champs <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Team =</span> <span class="kw">ifelse</span>(Team <span class="op">==</span><span class="st"> &quot;Warriorrs&quot;</span>,<span class="st">&quot;Warriors&quot;</span>,Team)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Team =</span> <span class="kw">ifelse</span>(Team <span class="op">==</span><span class="st"> &quot;&#39;Heat&#39;&quot;</span>,<span class="st">&quot;Heat&quot;</span>,Team)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Win =</span> <span class="kw">as.factor</span>(Win)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Home =</span> <span class="kw">as.factor</span>(Home))

runners &lt;-<span class="st"> </span>runners <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Team =</span> <span class="kw">ifelse</span>(Team <span class="op">==</span><span class="st"> &quot;Warriorrs&quot;</span>,<span class="st">&quot;Warriors&quot;</span>,Team)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Team =</span> <span class="kw">ifelse</span>(Team <span class="op">==</span><span class="st"> &quot;&#39;Heat&#39;&quot;</span>,<span class="st">&quot;Heat&quot;</span>,Team)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Win =</span> <span class="kw">as.factor</span>(Win)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Home =</span> <span class="kw">as.factor</span>(Home))</code></pre>
<p>Now, a good exercise would be too bind the two dataframes together. Ask your students to find the appropritate <strong>dplyr</strong> function for binding the rows together. Note that since the two dataframes have the same set of columns, this is easily done. They can use the function <code>bind_rows()</code> function as is in the lessons or use the base R function <code>row.bind()</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## bind the two data sets together</span>
allteams &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(champs,runners)</code></pre>
<p>It is in general better when we bind two datasets to have an indicator variable that shows from which dataset each row comes from. This can be done using the <code>.id</code> argument in the <code>bind_rows()</code> function. Note that by saying <code>"Champion" = champs</code> and <code>"Runner" = runners</code> we are making the identifier equal to <code>Champion</code> for the <em>champs</em> dataframe and equal to <code>Runner</code> for the <em>runners</em> dataframe.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## add a column that shows champions vs. runnerups call it rank</span>
allteams &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(<span class="st">&quot;Champion&quot;</span> =<span class="st"> </span>champs, <span class="st">&quot;Runner&quot;</span> =<span class="st"> </span>runners, <span class="dt">.id =</span> <span class="st">&quot;rank&quot;</span>)</code></pre>
</div>
<div id="exercise-2-calculating-age-based-on-birthdate" class="section level2 unnumbered">
<h2>Exercise 2: Calculating Age Based on Birthdate</h2>
<p>In this exercise, your students will learn how to work with data objects. They have to combine their skills in writing functions and working with the package <strong>lubridate</strong>. Ask them to install and load the package <strong>lubridate</strong>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;lubridate&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;lubridate&quot;</span>)</code></pre>
<p>First, ask them to create an object called and call it <code>mybday</code> that stores their birthday.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lubridate)</code></pre>
<pre><code>## Warning: package &#39;lubridate&#39; was built under R version 3.4.4</code></pre>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:base&#39;:
## 
##     date</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">mybday &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1998-09-20&quot;</span>)</code></pre>
<p>Note that they can also save their birthday like:</p>
<pre class="sourceCode r"><code class="sourceCode r">mybday &lt;-<span class="st"> </span><span class="kw">dmy</span>(<span class="st">&quot;20-Sep-1998&quot;</span>)</code></pre>
<p>Now ask your students to find the function in R that returns today’s date. You can ask them to google this as it’s likely that the first link has the answer to their question. The function they need to use is <code>Sys.Date()</code>. Ask them to save today’s date to an object called <code>today</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">today &lt;-<span class="st"> </span><span class="kw">Sys.Date</span>()</code></pre>
<p>The interesting thing about date objects is that we can do algebraic operations on them just like we do to numeric objects. We can add them or subtract one from another. Now, ask your studnets how they would calculate their age based on the two objects. They probably say they’d subtract <code>mybdat</code> from <code>today</code> and that’s true. When they do so, they will realize the answer is in days and not in years.</p>
<pre class="sourceCode r"><code class="sourceCode r">today <span class="op">-</span><span class="st"> </span>mybday</code></pre>
<pre><code>## Time difference of 7478 days</code></pre>
<p>Well, then can then easily convert the answer to years by dividing the number by 365 or they can use the function <code>time_length()</code> again from the <strong>lubridate</strong> package.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(today <span class="op">-</span><span class="st"> </span>mybday, <span class="dt">unit =</span> <span class="st">&quot;year&quot;</span>)</code></pre>
<pre><code>## [1] 20.48767</code></pre>
<p>Now that your studetns are comfortable calculating age based on a birthdate and current date, ask them to write a function that will take a person’s birthdate and will return the age in years. This should be easy given the solution above.</p>
<pre class="sourceCode r"><code class="sourceCode r">age_calc &lt;-<span class="st"> </span><span class="cf">function</span>(bday){
    bday =<span class="st"> </span><span class="kw">ymd</span>(bday)
    today =<span class="st"> </span><span class="kw">Sys.Date</span>()
    dif =<span class="st"> </span><span class="kw">time_length</span>(today <span class="op">-</span><span class="st"> </span>bday, <span class="dt">unit =</span> <span class="st">&quot;year&quot;</span>)
    <span class="kw">return</span>(dif)
}
<span class="kw">age_calc</span>(<span class="st">&quot;1982-05-10&quot;</span>)</code></pre>
<pre><code>## [1] 36.86301</code></pre>
<p>Tell your students to add a warning message that is shown to user warning them to enter date as “yyyy-md-dd”. So the function should show a warning message after the calculation is done.</p>
<pre class="sourceCode r"><code class="sourceCode r">age_calc &lt;-<span class="st"> </span><span class="cf">function</span>(bday){
    <span class="kw">warning</span>(<span class="st">&quot;Please enter the date as &#39;yyyy-mm-dd&#39;&quot;</span>)
    bday =<span class="st"> </span><span class="kw">ymd</span>(bday)
    today =<span class="st"> </span><span class="kw">Sys.Date</span>()
    dif =<span class="st"> </span><span class="kw">time_length</span>(today <span class="op">-</span><span class="st"> </span>bday, <span class="dt">unit =</span> <span class="st">&quot;year&quot;</span>)
    <span class="kw">return</span>(dif)
}
<span class="kw">age_calc</span>(<span class="st">&quot;1982-05-10&quot;</span>)</code></pre>
<pre><code>## Warning in age_calc(&quot;1982-05-10&quot;): Please enter the date as &#39;yyyy-mm-dd&#39;</code></pre>
<pre><code>## [1] 36.86301</code></pre>
<p>Next, you can tell your students to modify the function so that the user determines whether age should be reported in years, months, days, hours, etc. In other words, the <code>unit</code> argumenst should be entered by user but its default value is in days.</p>
<pre class="sourceCode r"><code class="sourceCode r">age_calc &lt;-<span class="st"> </span><span class="cf">function</span>(bday, <span class="dt">unit =</span> <span class="st">&quot;day&quot;</span>){
    <span class="kw">warning</span>(<span class="st">&quot;Please enter the date as &#39;yyyy-mm-dd&#39;&quot;</span>)
    bday =<span class="st"> </span><span class="kw">ymd</span>(bday)
    today =<span class="st"> </span><span class="kw">Sys.Date</span>()
    dif =<span class="st"> </span><span class="kw">time_length</span>(today <span class="op">-</span><span class="st"> </span>bday, <span class="dt">unit =</span> unit)
    <span class="kw">return</span>(dif)
}
<span class="kw">age_calc</span>(<span class="st">&quot;1982-05-10&quot;</span>, <span class="dt">unit =</span> <span class="st">&quot;hour&quot;</span>)</code></pre>
<pre><code>## Warning in age_calc(&quot;1982-05-10&quot;, unit = &quot;hour&quot;): Please enter the date as
## &#39;yyyy-mm-dd&#39;</code></pre>
<pre><code>## [1] 322920</code></pre>
<p>As the last step, show this function to your students and ask them to gues what the ouput will look like without running the function in R.</p>
<pre class="sourceCode r"><code class="sourceCode r">age_calc &lt;-<span class="st"> </span><span class="cf">function</span>(bday, <span class="dt">unit =</span> <span class="st">&quot;day&quot;</span>){
    <span class="kw">warning</span>(<span class="st">&quot;Please enter the date as &#39;yyyy-mm-dd&#39;&quot;</span>)
    bday =<span class="st"> </span><span class="kw">ymd</span>(bday)
    today =<span class="st"> </span><span class="kw">Sys.Date</span>()
    dif =<span class="st"> </span><span class="kw">round</span>(<span class="kw">time_length</span>(today <span class="op">-</span><span class="st"> </span>bday, <span class="dt">unit =</span> unit), <span class="dv">1</span>)
    <span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;You are &quot;</span>, dif, <span class="st">&quot; &quot;</span>, unit, <span class="st">&quot;s &quot;</span>, <span class="st">&quot;old&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span>))
}
<span class="kw">age_calc</span>(<span class="st">&quot;1982-05-10&quot;</span>, <span class="dt">unit =</span> <span class="st">&quot;year&quot;</span>)</code></pre>
<pre><code>## Warning in age_calc(&quot;1982-05-10&quot;, unit = &quot;year&quot;): Please enter the date as
## &#39;yyyy-mm-dd&#39;</code></pre>
<pre><code>## [1] &quot;You are 36.9 years old&quot;</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="visualization.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["cbds_instructors.pdf", "cbds_instructors.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
